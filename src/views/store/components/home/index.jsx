import React, { useState, useEffect } from 'react'
import SearchBar from './SearchBar'
import FlapCard from './FlapCard'
import Scroll from '@/common/scroll'
import { useSelector } from 'react-redux'

const BookHome = () => {
  const [offsetY, setOffsetY] = useState(0)
  const [height, setHeight] = useState(94)
  const showFlapCard = useSelector((state) =>
    state.getIn(['bookHome', 'showFlapCard'])
  )

  const handleBookListScroll = (Y) => {
    setOffsetY(Y)
  }

  useEffect(() => {
    if (offsetY > 0) {
      setHeight(52)
    } else {
      setHeight(94)
    }
  }, [offsetY])

  return (
    <>
      <SearchBar offsetY={offsetY}></SearchBar>
      <Scroll top={height} onScroll={(Y) => handleBookListScroll(Y)}>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
        <div>12312312223123123123123</div>
      </Scroll>
      {showFlapCard ? <FlapCard></FlapCard> : null}
    </>
  )
}

export default BookHome
